#!/usr/bin/env bash
# vim: ft=sh
set -e

NIMBUS_ETH1_BENCHMARKS_REPO="{{ nimbus_eth1_benchmark_git_repo_dir }}"

function log() {
   echo "$(date '+%Y-%m-%d %H:%M:%S') - $*"
}

function cleanBenchmarkDir() {
  log ">>> starting cleanBenchmarkDir() inside benchmarks-cleanup.sh"

  if [ ! -d "${NIMBUS_ETH1_BENCHMARKS_REPO}" ]; then
    log ">>> Benchmark directory ${NIMBUS_ETH1_BENCHMARKS_REPO} does not exist, skipping cleanup"
    return 0
  fi

  cd "${NIMBUS_ETH1_BENCHMARKS_REPO}"
  git clean -df
  cd -

  log ">>> completed cleanBenchmarkDir()"
}

cleanBenchmarkDir
